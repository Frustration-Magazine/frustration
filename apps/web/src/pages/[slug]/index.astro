---
import PostLayout from "@/layout/PostLayout/PostLayout.astro";
import { fetchPostBySlug } from "@/lib/wordpress";
import { setCacheHeaders, CachePresets } from "@/lib/cache";

export const prerender = false;
setCacheHeaders(Astro.response.headers, CachePresets.article);

const { slug } = Astro.params;
const post = await fetchPostBySlug({ slug });

if (!post) return Astro.rewrite("/404");
const htmlContent = post.content;
---

<PostLayout {...post}>
  <Fragment
    slot="content"
    set:html={htmlContent}
  />
</PostLayout>
