---
import { cn } from "@/lib/utils";

import Thumbnail from "./Thumbnail.astro";
import newsletter from "./assets/_newsletter_1.webp";
import newsletter2 from "./assets/_newsletter_2.webp";

const THUMBNAIL_WIDTH = 350;
---

<section
  class={cn(
    "relative flex h-[275px] w-full overflow-hidden bg-[linear-gradient(90deg,rgba(131,58,180,1)_0%,rgba(253,29,29,1)_50%,rgba(252,176,69,1)100%)] shadow-[inset_0_0_20px_rgba(0,0,0,.5)]",
    "mt-8",
    "md:mt-12",
    "lg:mt-16",
    "xl:mt-24",
  )}>
  <div class="relative z-10 m-auto w-full max-w-[1600px] px-6 lg:px-8 xl:px-10">
    {/* 🖼️ Images */}
    <div
      class="absolute right-[-300px] hidden -rotate-[10deg] scale-100 gap-8 opacity-30 lg:flex">
      <Thumbnail
        src={newsletter}
        width={THUMBNAIL_WIDTH}
        reverse={false}
      />
      <Thumbnail
        src={newsletter2}
        width={THUMBNAIL_WIDTH}
        reverse
      />
    </div>
    {/* 🔠 Newsletter */}
    <div class="grow">
      <h3
        class={cn(
          "relative flex w-full justify-center text-white items-end overflow-hidden font-bakbak ",
          "text-center text-5xl",
          "md:text-left md:text-6xl",
        )}>
        <span class="mr:auto">Newsletter</span>
        <div
          class={cn(
            "hidden relative grow",
            "md:block md:bottom-[9px] md:ml-[10px] md:h-[3px] md:bg-linear-to-r md:from-white md:to-transparent",
          )}>
        </div>
      </h3>
      <p
        class={cn(
          "text-white mb-6",
          "text-center text-sm",
          "md:text-left md:text-base",
        )}>
        <span class="xs:inline hidden"> 🗞️ </span>
        Recevez régulièrement nos dernières actualités !
      </p>
      <form
        id="form-newsletter-footer"
        class="newsletter-form mx-auto max-w-[350px] space-y-2 md:mx-0"
        method="post">
        {/* 📮 Mail */}
        <input
          type="email"
          required
          name="email"
          placeholder="Entrez votre email ici"
          class={cn(
            "h-[40px] bg-white disabled:bg-white/10 w-full rounded-full px-6 py-2 font-open-sans text-black text-base",
          )}
        />
        {/* 📩 Button */}
        <button
          type="submit"
          class={cn(
            "h-[40px] cursor-pointer w-full rounded-full bg-[linear-gradient(90deg,rgba(252,176,69,1)_0%,rgba(253,29,29,1)_100%)] font-bakbak uppercase text-white",
            "text-lg",
            "md:text-xl",
          )}>
          Recevoir la newsletter
        </button>
      </form>
    </div>
  </div>
</section>
<script>
  import { addToNewsletter } from "@/scripts/add-to-newsletter";
  const form = document.getElementById(
    "form-newsletter-footer",
  ) as HTMLFormElement;
  if (form) addToNewsletter(form);
</script>
