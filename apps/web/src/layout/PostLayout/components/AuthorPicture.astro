---
import { Image } from "astro:assets";
import { normalizeName } from "@/utils/strings";
const { author, size } = Astro.props;

const profilePicture = await Astro.glob("../../../content/authors/*.png").then(
  (images) => {
    const DEFAULT_PROFILE_PICTURE = images.find((image) =>
      image.default.src.includes("default"),
    )?.default;
    const normalizedAuthor = normalizeName(author);
    const matchingImage = images.find((image) =>
      image.default.src.includes(normalizedAuthor),
    );
    if (matchingImage) return matchingImage.default;
    return DEFAULT_PROFILE_PICTURE;
  },
);
---

<Image
  title={author}
  alt={author}
  width={size}
  height={size}
  src={profilePicture}
  class="inline rounded-full"
/>
