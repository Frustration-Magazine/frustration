---
import { cn } from "@/lib/utils";
import TagIcon from "../../assets/icons/tag.svg?raw";
import { Image } from "astro:assets";
const { author, date, categories } = Astro.props;

let DD_MM_YYYY = date
  ? new Date(date).toLocaleDateString("fr-FR", {
      day: "2-digit",
      month: "2-digit",
      year: "numeric",
    })
  : null;
---

<div class={cn("flex flex-col flex-wrap gap-1 text-sm", "md:flex-row md:justify-between md:text-base")}>
  <a
    href={`/posts?author=${author.slug}`}
    class="flex items-center"
  >
    <div class={cn("mr-2 grid w-5 place-items-center")}>
      <Image
        title={author.name}
        alt={author.name}
        width={50}
        height={50}
        src={author.avatar.url}
        class="inline rounded-full"
      />
    </div>
    <span class={cn("space-x-0.5", "text-base", "md:text-xl")}>
      <span class="font-bold">{author.name}</span>
      {
        date && (
          <>
            <span>|</span>
            <span>{DD_MM_YYYY}</span>
          </>
        )
      }
    </span>
  </a>
  <div class="categories flex flex-wrap items-center gap-x-2 gap-y-0">
    {
      categories.map((category: any) => (
        <a
          href={`/posts?category=${category.slug}`}
          class="flex items-center [&>svg]:mr-1.5 [&>svg]:w-[13px]"
        >
          <Fragment set:html={TagIcon} />
          <span>{category.name}</span>
        </a>
      ))
    }
  </div>
</div>
